if(void 0===window.giftbeeloaded||null===document.getElementById("giftbee-loaded")){try{window.giftbeeloaded=!0;var elem=document.createElement("div");elem.id="giftbee-loaded",elem.style.cssText="display:none;",document.body.appendChild(elem)}catch(t){console.error(t)}!function(t){var e,n,i=[],a={cart:{cartData:{items:[]},get:function(t){if(void 0===t&&(t=!0),t){var n=Date.now();if(n=Math.round(n/1500),Object.keys(this.cartData).length>0){var i=this;return new Promise(((t,e)=>{t(new Response(JSON.stringify(i.cartData),{status:200,statusText:"Smashing success!"}))}))}}return i=this,fetch(e.getRootUrl()+"cart.json?cartbot-cart-call",{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){return t.clone().json().then((function(e){return i.cartData=JSON.parse(JSON.stringify(e)),t}))}))}},nav:e={getRootUrl:function(){return window.location.origin?window.location.origin+"/":window.location.protocol+"/"+window.location.host+"/"},isHomePage:function(){return"/"===window.location.pathname},isProductPage:function(){return!!/\/products\/([^\?\/\n]+)/.test(window.location.href)},isCartPage:function(){return!!/\/cart\/?/.test(window.location.href)},getProductHandle:function(t){if(void 0===t&&(t=(t=window.location.href).replace("/products/products","/products")),/\/products\/([^\?\/\n]+)/.test(t)){var e=t.match(/\/products\/([^\?\/\n]+)/);if(void 0!==e[1])try{return decodeURIComponent(e[1]).replace("#","")}catch(t){return e[1].replace("#","")}}return!1},getAppApiEndpoint:function(){return"https://app.cart-bot.net/public/api/"},getInvoiceEndpoint:function(){return this.getAppApiEndpoint()+"cdo.php?shop=sainsmart.myshopify.com"},getSellingPlanId:function(){var t=this.getQueryParams(window.location.search);return void 0!==t.selling_plan?t.selling_plan:""},getQueryParams:function(t){t=t.split("+").join(" ");for(var e,n={},i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return n}},string:{getRandomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",n=e.length,i=[],a=0;a<t;a++)i.push(e.charAt(Math.floor(Math.random()*n)));return i.join("")}},queue:{queue:{},add:function(t,e,n){void 0===this.queue[t]&&(this.queue[t]={finish:n,q:[],tick:0}),this.queue[t].q.push(e)},process:function(t){if(void 0!==this.queue[t]){this.queue[t].q.length;var e=this.queue[t].tick;void 0!==this.queue[t].q[e]&&(this.queue[t].q[e](),this.tick(t))}},tick:function(t){void 0!==this.queue[t]&&(this.queue[t].tick++,this.queue[t].tick===this.queue[t].q.length?(this.queue[t].finish(),delete this.queue[t]):this.process(t))},cancel:function(t){delete this.queue[t]}},promiseQueue:n={queue:{},add:function(t,e,n){void 0===this.queue[t]&&(this.queue[t]={finish:n,q:[],tick:0}),this.queue[t].q.push(e)},process:function(t){if(void 0!==this.queue[t]){this.queue[t].q.length;var e=this.queue[t].tick;void 0!==this.queue[t].q[e]&&this.queue[t].q[e]().then((function(){setTimeout((function(){n.tick(t)}),10)}))}},tick:function(t){void 0!==this.queue[t]&&(this.queue[t].tick++,this.queue[t].tick===this.queue[t].q.length?(this.queue[t].finish(),delete this.queue[t]):this.process(t))},cancel:function(t){delete this.queue[t]}},cookie:{key:"cartbot_data_",maxAge:36e5,set:function(t,e,n){var i=new Date;t=this.key+t;var a={data:JSON.parse(e),time:(new Date).getTime()};if(e=JSON.stringify(a),n>0){i.setTime(i.getTime()+24*n*60*60*1e3);var o="expires="+i.toUTCString();document.cookie=t+"="+e+";"+o+";path=/"}else document.cookie=t+"="+e+";path=/"},get:function(t){for(var e=(t=this.key+t)+"=",n=decodeURIComponent(document.cookie).split(";"),i="",a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);0==o.indexOf(e)&&(i=o.substring(e.length,o.length),a=n.length)}try{var r=JSON.parse(i);return void 0===r.time?i:r.time<(new Date).getTime()-this.maxAge?"":JSON.stringify(r.data)}catch(t){}return""}}},o=function(){function t(t,e){for(;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null}function e(){if(void 0!==window.bndlr&&"function"==typeof bndlr.canUseCheckout&&"function"==typeof bndlr.checkout&&!0===bndlr.canUseCheckout())return bndlr.checkout(),!0;window.location.href="/checkout"}function n(t){var e=a.cart.get(!1).then((function(e){return function(t,e){var n=c(void 0,e);return n.add.length>0?l(n.add).then((function(e){n.remove.length>0?d(n.remove).then((function(e){t&&a.nav.isCartPage()&&window.location.reload()})):t&&a.nav.isCartPage()&&window.location.reload()})):n.remove.length>0?d(n.remove).then((function(e){t&&a.nav.isCartPage()&&window.location.reload()})):new Promise(((t,e)=>{t(new Response("",{status:200,statusText:"Fallback promise."}))}))}(!0,t)}));return e}function o(){return a.cart.get(!1)}function r(arguments){var t=arguments[0],e=arguments[1],n=u(t,"add"),i={};if(n)if("object"==typeof e&&"object"==typeof e.body)for(var o of e.body.entries())i[o[0]]=o[1];else if("object"==typeof e&&"string"==typeof e.body&&void 0!==e.headers&&"string"==typeof e.headers["Content-Type"]&&"application/json"===e.headers["Content-Type"])try{i=JSON.parse(e.body)}catch(t){}else"object"==typeof e&&"string"==typeof e.body&&(i=a.nav.getQueryParams(e.body));if(void 0!==i.id){var r=1;void 0!==i.quantity&&(r=i.quantity);var s="";return void 0!==i.selling_plan&&(s=i.selling_plan),{id:i.id,quantity:r,selling_plan:s}}return!1}function s(arguments){var t=arguments[0],e=["/cart/"],n=!1;if("string"==typeof t)for(var i=0;i<e.length;i++)-1!==t.indexOf(e[i])&&-1===t.indexOf("cartbot-cart-call")&&(n=!0,i=e.length);return n}function u(t,e){var n={add:["/cart/add.js","/cart/add.json","/cart/add"],change:["/cart/change.js","/cart/change.json","/cart/change"]};if(void 0===n[e])return!1;var i=n[e],a=!1;if("string"==typeof t)for(var o=0;o<i.length;o++)-1!==t.indexOf(i[o])&&-1===t.indexOf("cartbot-cart-call")&&(a=!0,o=i.length);return a}function c(t,e){void 0===e&&(e=!1);var n=JSON.parse(JSON.stringify(a.cart.cartData)),o=(JSON.parse(JSON.stringify(n)),[]);if(void 0!==t){var r=!1;if(n.items.length>0)for(var s=0;s<n.items.length;s++){var u="";void 0!==n.items[s].selling_plan_allocation&&(u=n.items[s].selling_plan_allocation.selling_plan.id);var c="";void 0!==t.selling_plan&&(c=t.selling_plan),1*n.items[s].id==1*t.id&&u+""==c+""&&(n.items[s].quantity=1*n.items[s].quantity+1*t.quantity,r=!0)}if(!1===r){var l={id:1*t.id,quantity:1*t.quantity,key:1*t.id};void 0!==t.selling_plan&&(l.selling_plan_allocation={selling_plan:{id:t.selling_plan}}),n.items.push(l)}void 0!==t.quantity&&t.quantity}var d=0;if(n.items.length>0)for(s=0;s<n.items.length;s++)d+=n.items[s].line_price;d/=100;for(var p=[],f=[],h=0;h<i.length;h++)for(var g=i[h],v=!0,y=0;v&&y<100;){v=!1,y++;var m=JSON.parse(JSON.stringify(n)),_=!0,q="true"!==g.must_include_any_variant,w="true"===g.works_in_reverse,b=!1,k=[],O=!1;if("true"===g.apply_once_per_session&&!0!==e)try{""!==(T=a.cookie.get("applied_rules"))&&(T=JSON.parse(T)),void 0!==T["_"+g.id]&&(O=!0,_=!1)}catch(t){}if("products"===g.condition_type){if(g.product_variants_contain.length>0){for(var S=0,N=0;N<g.product_variants_contain.length;N++)for(var J=g.product_variants_contain[N],P=0;P<n.items.length;P++)u="",void 0!==(l=n.items[P]).selling_plan_allocation&&(u=l.selling_plan_allocation.selling_plan.id+""),1*J.variant_id==1*l.id&&l.quantity>0&&l.quantity>=J.quantity&&(J.selling_plan_id+""===u||"one_time_or_any"===J.selling_plan_id||"any"===J.selling_plan_id&&""!==u)&&(S++,l.quantity=l.quantity-J.quantity,k.push({id:J.variant_id,quantity:J.quantity,line_key:l.key})),!0===q?S===g.product_variants_contain.length&&(P=n.items.length):S>0&&(P=n.items.length);_=!0===q?S===g.product_variants_contain.length:S>0}}else"cart_value"===g.condition_type&&(_=!1,"true"===g.cart_value_max_enable?1*g.cart_value_min<=d&&1*g.cart_value_max>=d&&(_=!0):1*g.cart_value_min<=d&&(_=!0));if(_){if(g.product_variants_add.length>0){for(N=0;N<g.product_variants_add.length;N++){var j=(E=g.product_variants_add[N]).quantity,C=!1;for(P=0;P<n.items.length;P++)if(u="",void 0!==(l=n.items[P]).selling_plan_allocation&&(u=l.selling_plan_allocation.selling_plan.id),1*E.variant_id==1*l.id&&l.quantity>0&&u+""==E.selling_plan_id+""){var Q=l.quantity;Q>E.quantity&&(Q=E.quantity),j<Q&&(Q=j),"true"===g.remove_the_initial_variants&&"false"===g.apply_once_per_cart||(j-=Q)<0&&(j=0),C=!0,l.quantity=l.quantity-Q,P=n.items.length}!1===C||!0===C&&j>0?(!1===O&&p.push({id:E.variant_id,quantity:j,selling_plan:E.selling_plan_id}),b=!0,"false"===g.apply_once_per_cart&&"cart_value"!==g.condition_type&&(v=!0)):"false"===g.apply_once_per_cart&&"cart_value"!==g.condition_type&&(v=!0)}if("true"===g.apply_once_per_session&&!0===b&&!0!==e)try{var T;(T=""!==(T=a.cookie.get("applied_rules"))?JSON.parse(T):{})["_"+g.id]=g.id,a.cookie.set("applied_rules",JSON.stringify(T),0)}catch(t){}}}else n=JSON.parse(JSON.stringify(m)),w&&o.push(JSON.parse(JSON.stringify(g)));"true"===g.remove_the_initial_variants&&!0===b&&(f=f.concat(JSON.parse(JSON.stringify(k)))),k=[]}if(o.length>0)for(var x=0;x<o.length;x++){g=o[x];var R=[],D=n;for(N=0;N<g.product_variants_add.length;N++){var E=g.product_variants_add[N];for(P=0;P<D.items.length;P++)u="",void 0!==(l=D.items[P]).selling_plan_allocation&&(u=l.selling_plan_allocation.selling_plan.id+""),1*E.variant_id==1*l.id&&l.quantity>0&&E.selling_plan_id+""===u&&(P=D.items.length,R.push({id:E.variant_id,quantity:1*E.quantity,line_key:l.key}))}f=f.concat(JSON.parse(JSON.stringify(R)))}return{add:p,remove:f}}async function l(t){for(var e={items:[]},n=0;n<t.length;n++){var i={id:t[n].id,quantity:t[n].quantity};void 0!==t[n].selling_plan&&""!==t[n].selling_plan&&(i.selling_plan=t[n].selling_plan);for(var a=!1,o=0;o<e.items.length;o++)e.items[o].id!==i.id||typeof i.selling_plan!=typeof e.items[o].selling_plan||void 0!==i.selling_plan&&i.selling_plan!==e.items[o].selling_plan||(e.items[o].quantity+=i.quantity,a=!0);!1===a&&e.items.push(i)}return await fetch("/cart/add?cartbot-cart-call",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(t){if(void 0!==window.$)try{window.$("body").trigger("added.ajaxProduct"),document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{}))}catch(t){}}))}async function d(t){for(var e={},n=0;n<t.length;n++){var i=t[n],o=i.line_key;void 0===e[o]?e[o]={id:i.id,line_key:i.line_key,removable_quantity:1*i.quantity}:e[o].removable_quantity+=i.quantity}return a.cart.get(!1).then((function(t){return t.clone().json().then((function(t){var n={};for(var i in e)if(e.hasOwnProperty(i)){for(var a=!1,o=0;o<t.items.length;o++)t.items[o].key===i&&t.items[o].quantity>0&&((r=t.items[o].quantity-e[i].removable_quantity)<0&&(r=0),t.items[o].quantity=r,n[i]=r,a=!0);if(!1===a)for(o=0;o<t.items.length;o++){var r;0===t.items[o].key.indexOf(i)&&t.items[o].quantity>0&&((r=t.items[o].quantity-e[i].removable_quantity)<0&&(r=0),n[i]=r,a=!0)}}return fetch("/cart/update.js?cartbot-cart-call",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({updates:n})})}))}))}return{init:function(){var i;i=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var t="";return"string"==typeof arguments[1]&&arguments[1].length>0&&(t=arguments[1],this.addEventListener("load",(function(){try{if("string"==typeof t&&t.length>0&&(u(t,"add")||u(t,"change"))){var e=a.string.getRandomString(10);a.promiseQueue.add(e,(function(){return n()}),(function(){})),a.promiseQueue.process(e)}}catch(t){console&&console.warn&&console.warn("[Cartbot cart event listener] Error in handleXhrDone:  "+t.message)}}))),i.apply(this,arguments)},function(t){if("function"==typeof t.fetch)try{var e=t.fetch;t.fetch=function(){var t=a.string.getRandomString(10);try{if(u(arguments[0],"change"))a.promiseQueue.add(t,(function(){return n()}),(function(){}));else{var i=r(arguments);if(!1!==i){a.promiseQueue.add(t,(function(){return o()}),(function(){}));var p,f=c(i);if(f.add.length>0){var h=arguments,g=this;return l(f.add).then((function(n){var i=e.apply(g,h);return f.remove.length>0?(i.then((function(e){d(f.remove).then((function(e){a.promiseQueue.process(t)}))})),i):(i.then((function(e){a.promiseQueue.process(t)})),i)}))}if(f.remove.length>0)return h=arguments,g=this,(p=e.apply(g,h)).then((function(e){d(f.remove).then((function(e){a.promiseQueue.process(t)}))})),p;a.promiseQueue.add(t,(function(){return n()}),(function(){}))}}}catch(t){console.log("Cartbot"),console.error(t)}return s(arguments)&&a.promiseQueue.add(t,(function(){return o()}),(function(){})),(p=e.apply(this,arguments)).then((function(e){a.promiseQueue.process(t)})),p}}catch(t){console.log(t)}}(window),function(){try{document.addEventListener("click",(function(i){try{if(i.target.matches('form[action="/cart/add"] .shopify-payment-button__button')||i.target.matches('form[action="/cart/add"] .shopify-payment-button__button *')||i.target.matches('form[action="/cart/add"] .shopify-payment-button__more-options')||i.target.matches('form[action="/cart/add"] .lh-buy-now')){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation();var o=t(i.target,"form");if(null!==o){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation();var s=o.getAttribute("action"),u=new URLSearchParams,p=new FormData(o);for(var f of p)u.append(f[0],f[1]);var h=c(r([s,{body:u}]),!0);s+="?cartbot-cart-call";var g="buy_now_queue";h.add.length>0?(addingVariants=!0,a.promiseQueue.add(g,(function(){return l(h.add)}),e)):h.remove.length>0&&a.promiseQueue.add(g,(function(){return d(h.remove)}),e),a.promiseQueue.add(g,(function(){return fetch(s,{method:"post",body:u}).then((function(t){}))}),e),a.promiseQueue.add(g,(function(){return n(!0)}),e),a.promiseQueue.process(g)}}}catch(t){console.log(t.message)}}),!0)}catch(t){console.log(t.message)}}(),setTimeout((function(){n()}),1e3)}}}();if(void 0===r)var r={};o.init()}()}