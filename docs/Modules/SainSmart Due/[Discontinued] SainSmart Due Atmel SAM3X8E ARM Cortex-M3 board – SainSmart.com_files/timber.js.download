function replaceUrlParam(url,paramName,paramValue){var pattern=new RegExp('('+paramName+'=).*?(&|$)'),newUrl=url.replace(pattern,'$1'+paramValue+'$2');if(newUrl==url){newUrl=newUrl+(newUrl.indexOf('?')>0?'&':'?')+paramName+'='+paramValue}return newUrl}window.timber=window.timber||{};timber.cacheSelectors=function(){timber.cache={$html:$('html'),$body:$('body'),$navigation:$('#AccessibleNav'),$changeView:$('.change-view'),$productImage:$('#ProductPhotoImg'),$thumbImages:$('#ProductThumbs').find('a.product-single__thumbnail'),$recoverPasswordLink:$('#RecoverPassword'),$hideRecoverPasswordLink:$('#HideRecoverPasswordLink'),$recoverPasswordForm:$('#RecoverPasswordForm'),$customerLoginForm:$('#CustomerLoginForm'),$passwordResetSuccess:$('#ResetSuccess')}};timber.init=function(){timber.cacheSelectors();timber.accessibleNav();timber.productImageSwitch();timber.responsiveVideos();timber.collectionViews();timber.loginForms()};timber.accessibleNav=function(){var $nav=timber.cache.$navigation,$allLinks=$nav.find('a'),$topLevel=$nav.children('li').find('a'),$parents=$nav.find('.site-nav--has-dropdown'),$subMenuLinks=$nav.find('.site-nav__dropdown').find('a'),activeClass='nav-hover',focusClass='nav-focus';$parents.on('mouseenter touchstart',function(evt){var $el=$(this);if(!$el.hasClass(activeClass)){evt.preventDefault()}showDropdown($el)});$parents.on('mouseleave',function(){hideDropdown($(this))});$subMenuLinks.on('touchstart',function(evt){evt.stopImmediatePropagation()});$allLinks.focus(function(){handleFocus($(this))});$allLinks.blur(function(){removeFocus($topLevel)});function handleFocus($el){var $subMenu=$el.next('ul'),hasSubMenu=$subMenu.hasClass('sub-nav')?true:false,isSubItem=$('.site-nav__dropdown').has($el).length,$newFocus=null;if(!isSubItem){removeFocus($topLevel);addFocus($el)}else{$newFocus=$el.closest('.site-nav--has-dropdown').find('a');addFocus($newFocus)}}function showDropdown($el){$el.addClass(activeClass);setTimeout(function(){timber.cache.$body.on('touchstart',function(){hideDropdown($el)})},250)}function hideDropdown($el){$el.removeClass(activeClass);timber.cache.$body.off('touchstart')}function addFocus($el){$el.addClass(focusClass)}function removeFocus($el){$el.removeClass(focusClass)}};timber.getHash=function(){return window.location.hash};timber.updateHash=function(hash){window.location.hash='#'+hash;$('#'+hash).attr('tabindex',-1).focus()};timber.productPage=function(options){var moneyFormat=options.money_format,variant=options.variant,selector=options.selector;var $productImage=$('#ProductPhotoImg'),$addToCart=$('#AddToCart'),$productPrice=$('#ProductPrice'),$comparePrice=$('#ComparePrice'),$quantityElements=$('.quantity-selector, label + .js-qty'),$addToCartText=$('#AddToCartText');if(variant){if(variant.featured_image){var newImg=variant.featured_image,el=$productImage[0];Shopify.Image.switchImage(newImg,el,timber.switchImage)}if(variant.available){$addToCart.removeClass('disabled').prop('disabled',false);$addToCartText.html("Add to Cart");$quantityElements.show()}else{$addToCart.addClass('disabled').prop('disabled',true);$addToCartText.html("Sold Out");$quantityElements.hide()}$productPrice.html(Shopify.formatMoney(variant.price,moneyFormat));if(variant.compare_at_price>variant.price){$comparePrice.html("Compare at"+': '+Shopify.formatMoney(variant.compare_at_price,moneyFormat)).show()}else{$comparePrice.hide()}}else{$addToCart.addClass('disabled').prop('disabled',true);$addToCartText.html("Unavailable");$quantityElements.hide()}};timber.productImageSwitch=function(){if(timber.cache.$thumbImages.length){timber.cache.$thumbImages.on('click',function(evt){evt.preventDefault();var newImage=$(this).attr('href');timber.switchImage(newImage,null,timber.cache.$productImage)})}};timber.switchImage=function(src,imgObject,el){var $el=$(el);$el.attr('src',src)};timber.responsiveVideos=function(){$('iframe[src*="youtube.com/embed"]').wrap('<div class="video-wrapper"></div>');$('iframe[src*="player.vimeo"]').wrap('<div class="video-wrapper"></div>')};timber.collectionViews=function(){if(!$("#catalog_block").length||!$("#catalog_block").hasClass('ajax-filter')){if(timber.cache.$changeView.length){timber.cache.$changeView.on('click',function(){var view=$(this).data('view'),url=document.URL,hasParams=url.indexOf('?')>-1;if(hasParams){window.location=replaceUrlParam(url,'view',view)}else{window.location=url+'?view='+view}})}}};timber.loginForms=function(){function showRecoverPasswordForm(){timber.cache.$recoverPasswordForm.show();timber.cache.$customerLoginForm.hide()}function hideRecoverPasswordForm(){timber.cache.$recoverPasswordForm.hide();timber.cache.$customerLoginForm.show()}timber.cache.$recoverPasswordLink.on('click',function(evt){evt.preventDefault();showRecoverPasswordForm()});timber.cache.$hideRecoverPasswordLink.on('click',function(evt){evt.preventDefault();hideRecoverPasswordForm()});if(timber.getHash()=='#recover'){showRecoverPasswordForm()}};timber.resetPasswordSuccess=function(){timber.cache.$passwordResetSuccess.show()};$(timber.init);